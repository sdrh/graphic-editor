<div class="panel">
  <div class="header">
    <input
      class="title"
      type="text"
      [attr.readonly]="titleReadonly || null"
      [(ngModel)]="dataSetting.name"
      (dblclick)="titleReadonly = false"
      (blur)="titleReadonly = true"
      (change)="emitChange()"
    />
    <span class="action" (click)="deleteDataSetting()"
      ><i class="iconfont icon-delete"></i
    ></span>
  </div>
  <div class="general-row">
    <span class="label">type</span>
    <ng-select
      class="select"
      [items]="dataTypeList"
      [ngModel]="dataSetting.type"
      (ngModelChange)="onSettingTypeChange($event)"
    ></ng-select>
  </div>
  <ng-container *ngIf="dataSetting.type === dataType.Api">
    <div class="general-row">
      <span class="label">address</span>
    </div>
    <div class="general-row">
      <textarea
        class="urlInput"
        rows="4"
        placeholder="Enter http or https protocol address or absolute address"
        [(ngModel)]="dataSetting.apiUrl"
        (ngModelChange)="emitChange()"
      ></textarea>
    </div>
    <div class="general-row">
      <label class="checkbox">
        <input
          type="checkbox"
          [(ngModel)]="dataSetting.polling"
          (ngModelChange)="emitChange()"
        />
        <span></span>
      </label>
      <span>polling</span>
      <input
        class="interval"
        type="number"
        min="0"
        placeholder="interval(s)"
        [(ngModel)]="dataSetting.interval"
        (ngModelChange)="emitChange()"
      />
    </div>
  </ng-container>
  <ng-container *ngIf="dataSetting.type === dataType.PageData">
    <div class="general-row">
      <span class="label">data source</span>
      <ng-select
        class="select"
        [items]="pageDataList"
        [ngModel]="dataSetting.parent"
        (ngModelChange)="onPageSettingChange($event)"
      ></ng-select>
    </div>
  </ng-container>
  <ng-container *ngIf="dataSetting.type === dataType.Const">
    <div class="general-row">
      <textarea
        class="urlInput"
        rows="8"
        placeholder="input json string"
        [(ngModel)]="dataSetting.const"
        (ngModelChange)="emitChange()"
      ></textarea>
    </div>
  </ng-container>
</div>
