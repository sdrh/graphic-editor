<div class="panel">
  <div class="header">
    <span class="title">event</span>
    <span class="action" (click)="deleteListener()"
      ><i class="iconfont icon-delete"></i
    ></span>
  </div>
  <div class="general-row">
    <span class="label">type</span>
    <ng-select
      class="select"
      [items]="eventTypeList"
      [(ngModel)]="listener.type"
      (ngModelChange)="emitChange()"
    ></ng-select>
  </div>
  <div class="general-row">
    <span class="label">Behavior</span>
    <ng-select
      class="select"
      [items]="actionTypeList"
      [(ngModel)]="listener.action"
      (ngModelChange)="onActionChange($event)"
    ></ng-select>
  </div>
  <ng-container *ngIf="listener.action === actionType.JumpUrl">
    <div class="general-row">
      <span class="label">target location</span>
      <ng-select
        class="select"
        [items]="openUrlTypeList"
        [(ngModel)]="listener.actionData.jumpTarget"
        (ngModelChange)="emitChange()"
      ></ng-select>
    </div>
    <div class="general-row">
      <span class="label">地址</span>
    </div>
    <div class="general-row">
      <textarea
        class="input"
        rows="4"
        placeholder="Enter http or https protocol address"
        [(ngModel)]="listener.actionData.jumpUrl"
        (ngModelChange)="emitChange()"
      ></textarea>
    </div>
  </ng-container>
  <ng-container *ngIf="listener.action === actionType.JumpPage">
    <div class="general-row">
      <span class="label">page</span>
      <ng-select
        class="select"
        [items]="pageList"
        [(ngModel)]="listener.actionData.jumpPage"
        (ngModelChange)="emitChange()"
        (expand)="getPageList()"
      >
      </ng-select>
    </div>
    <div class="general-row">
      <span class="label">target location</span>
      <ng-select
        class="select"
        [items]="openPageTypeList"
        [(ngModel)]="listener.actionData.jumpTarget"
        (ngModelChange)="onJumTargetChange($event)"
      ></ng-select>
    </div>
    <div
      *ngIf="listener.actionData.jumpTarget === openPageType.LinkArea"
      class="general-row"
    >
      <span class="label">link area</span>
      <ng-select
        class="select"
        [items]="linkWidgetList"
        [(ngModel)]="listener.actionData.linkWidget"
        (expand)="getLinkWidgetList()"
        (mouseenterItem)="linkWidgetHighlight($event)"
        (mouseleaveItem)="removeLinkWidgetHighlight($event)"
        (ngModelChange)="onLinkWidgetChange($event)"
      ></ng-select>
    </div>
  </ng-container>
</div>
